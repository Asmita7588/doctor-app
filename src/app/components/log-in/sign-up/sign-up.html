<div class="reg-container">
  <form (submit)="$event.preventDefault(); onSubmit()" class="reg-form">
    
    <div class="logo-wrapper">
      <img src="assests/dpulselogo.png" alt="Doctor App Logo">
    </div>

    <h2 style="text-align: center; color: #333;">
      {{ userType() === 'doctor' ? 'Doctor Registration' : 'Patient Registration' }}
    </h2>

    <div class="form-row">
      <div class="input-group">
        <label for="fName">First Name</label>
        <input id="fName" [(ngModel)]="doctor().name.firstName" name="fName" placeholder="Enter first name" required />
      </div>
      <div class="input-group">
        <label for="lName">Last Name</label>
        <input id="lName" [(ngModel)]="doctor().name.lastName" name="lName" placeholder="Enter last name" required />
      </div>
    </div>

    <div class="form-row">
      @if (userType() === 'doctor') {
        <div class="input-group">
          <label for="spec">Speciality</label>
          <input id="spec" [(ngModel)]="doctor().speciality" name="spec" placeholder="e.g. Surgeon" required />
        </div>
      } @else {
        <div class="input-group">
          <label>Registration Type</label>
          <input value="Patient" disabled style="background-color: #f0f0f0;" />
        </div>
      }

      <div class="dob-group">
        <label for="dob">Date of Birth</label>
        <div class="dob-wrapper">
            <input id="dob" [(ngModel)]="doctor().dob" name="dob" type="date" required />
            <span class="age-badge">Age: {{ age() }}</span>
        </div>
      </div>
    </div>

    <div class="form-row">
      <div class="input-group">
        <label for="mob">Mobile Number</label>
        <input id="mob" [(ngModel)]="doctor().contact.mobile" name="mob" placeholder="Contact number" />
      </div>
      <div class="input-group">
        <label for="email">Email Address</label>
        <input id="email" [(ngModel)]="doctor().contact.email" name="email" type="email" placeholder="Email id" />
      </div>
    </div>

    <div class="form-row">
  <div class="input-group">
    <label for="gender">Gender</label>
    <select id="gender" [(ngModel)]="doctor().gender" name="gender" required>
      <option value="" disabled selected>Select Gender</option>
      <option value="Male">Male</option>
      <option value="Female">Female</option>
      <option value="Other">Other</option>
    </select>
  </div>
  <div class="input-group"></div> 
</div>

    <fieldset>
      <legend>Home Address</legend>
      
      <div class="input-group full-width">
        <label for="st1">Street Address</label>
        <input id="st1" [(ngModel)]="doctor().address.street1" name="st1" placeholder="Flat / House / Street" />
      </div>

      <div class="form-row">
        <div class="input-group">
          <label for="city">City</label>
          <input id="city" [(ngModel)]="doctor().address.city" name="city" placeholder="City name" />
        </div>
        <div class="input-group">
          <label for="zip">Zip Code</label>
          <input id="zip" [(ngModel)]="doctor().address.zipCode" name="zip" placeholder="Pincode" />
        </div>
      </div>
    </fieldset>

    <div class="form-row">
      <div class="input-group">
        <label for="pwd">Password</label>
        <input id="pwd" [(ngModel)]="doctor().password" name="pwd" type="password" placeholder="set password" required />
      </div>

      <div class="input-group">
        <label for="cpwd">Confirm Password</label>
        <input id="cpwd" [(ngModel)]="doctor().confirmPassword" name="cpwd" type="password" placeholder="Repeat password" required />
      </div>
    </div>

    @if (doctor().confirmPassword && !passwordsMatch()) {
      <p class="error-text">Passwords do not match!</p>
    } @else if (doctor().confirmPassword && passwordsMatch()) {
      <p class="success-text">Passwords matched!</p>
    }

    <button type="submit" [disabled]="!passwordsMatch()">Register</button>
  </form>
</div>